import{a as pe}from"./chunk-FM3JJRYB.js";import{a as h}from"./chunk-QBZUKA3T.js";import{d as re,e as oe,f as ae}from"./chunk-VBXNX42A.js";import{a as M}from"./chunk-2B5LARV5.js";import{d as y,g as F,h as w,i as I,k as R,m as L,u as P}from"./chunk-754SWOLJ.js";import{f as G,j as x,l as se,m as le}from"./chunk-VYDR2TO7.js";import"./chunk-226QG6WL.js";import{Ac as te,Ba as S,Bc as ie,Ec as ne,G as j,Hc as v,Jc as T,Oa as E,Pa as J,Qa as g,Qb as n,Rb as r,Ua as d,Va as a,Wa as l,Xa as c,Ya as b,Za as A,_a as K,aa as u,cb as Q,db as X,ea as W,fa as H,hb as D,ia as z,ib as Z,jb as N,kc as $,la as f,va as i,xb as p,yb as _,yc as ee,zb as m}from"./chunk-LKU6W7PO.js";var B=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=S({type:e,selectors:[["app-settings"]],decls:20,vars:12,consts:[[1,"container"],[1,"row"],[1,"col-12","col-sm-3","mb-3"],[1,"nav","flex-column","nav-pills","me-3"],["routerLink","/settings/identity","routerLinkActive","active",1,"nav-link","mb-1"],["routerLink","/settings/security","routerLinkActive","active",1,"nav-link","mb-1"],["routerLink","/settings/delete-account","routerLinkActive","active",1,"nav-link","mb-1"],[1,"col-12","col-sm"],[1,"tab-content"]],template:function(t,s){t&1&&(a(0,"div",0)(1,"h1"),p(2),n(3,"translate"),l(),c(4,"hr"),a(5,"div",1)(6,"div",2)(7,"div",3)(8,"a",4),p(9),n(10,"translate"),l(),a(11,"a",5),p(12),n(13,"translate"),l(),a(14,"a",6),p(15),n(16,"translate"),l()()(),a(17,"div",7)(18,"div",8),c(19,"router-outlet"),l()()()()),t&2&&(i(2),_(r(3,4,"SETTINGS_PAGE.TITLE")),i(7),m(" ",r(10,6,"SETTINGS_PAGE.TABS.IDENTITY.TITLE")," "),i(3),m(" ",r(13,8,"SETTINGS_PAGE.TABS.SECURITY.TITLE")," "),i(3),m(" ",r(16,10,"SETTINGS_PAGE.TABS.DELETE_ACCOUNT.TITLE")," "))},dependencies:[T,ne,ee,te,ie,v],styles:[".col-12.col-sm-3.mb-3[_ngcontent-%COMP%]{min-width:240px}"],changeDetection:0})};function de(e,o){e&1&&(a(0,"small",6),p(1),n(2,"translate"),l(),c(3,"br")(4,"br")),e&2&&(i(),m(" ",r(2,1,"SETTINGS_PAGE.TABS.IDENTITY.INFORMATIONS_UPDATED")," "))}function ue(e,o){e&1&&(a(0,"button",5),c(1,"span",7),p(2),n(3,"translate"),l()),e&2&&(d("disabled",!0),i(2),m(" ",r(3,2,"GENERAL.MODIFYING")," "))}function fe(e,o){if(e&1&&(a(0,"button",5),p(1),n(2,"translate"),l()),e&2){let t=N();d("disabled",t.formGroup().invalid),i(),m(" ",r(2,2,"GENERAL.MODIFY")," ")}}var O=class e{store=u(G);freelancer;updateFreelancerSettingsIdentityError;onUpdateFreelancerSettingsIdentity;formGroup=f(new w({email:new I("",[y.required]),firstName:new I("",[y.required]),lastName:new I("",[y.required])}));constructor(){this.freelancer=this.store.select(x),this.updateFreelancerSettingsIdentityError=this.store.select(se),this.onUpdateFreelancerSettingsIdentity=this.store.select(le),this.freelancer.pipe(j(1)).subscribe(o=>{this.formGroup().controls.email.setValue(o?.email),this.formGroup().controls.firstName.setValue(o?.firstName),this.formGroup().controls.lastName.setValue(o?.lastName)}),this.store.dispatch(oe())}onSubmit(){this.store.dispatch(ae({email:this.formGroup().controls.email.value,firstName:this.formGroup().controls.firstName.value,lastName:this.formGroup().controls.lastName.value}))}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=S({type:e,selectors:[["app-settings-identity"]],decls:17,vars:28,consts:[[3,"submit","formGroup"],[1,"mb-3"],[3,"id","label","type","control","error"],[3,"id","label","type","control"],[1,"text-center"],[1,"btn","btn-primary",3,"disabled"],[1,"text-success"],[1,"fa-solid","fa-spinner","fa-spin"]],template:function(t,s){t&1&&(a(0,"form",0),D("submit",function(){return s.onSubmit()}),a(1,"div",1),c(2,"app-input",2),n(3,"translate"),n(4,"async"),l(),a(5,"div",1),c(6,"app-input",3),n(7,"translate"),l(),a(8,"div",1),c(9,"app-input",3),n(10,"translate"),l(),a(11,"div",4),E(12,de,5,3),n(13,"async"),E(14,ue,4,4,"button",5),n(15,"async"),J(16,fe,3,4,"button",5),l()()),t&2&&(d("formGroup",s.formGroup()),i(2),d("id","this-email")("label",r(3,16,"GENERAL.EMAIL"))("type","email")("control","email")("error",r(4,18,s.updateFreelancerSettingsIdentityError).email),i(4),d("id","this-email")("label",r(7,20,"GENERAL.FIRST_NAME"))("type","text")("control","firstName"),i(3),d("id","this-email")("label",r(10,22,"GENERAL.LAST_NAME"))("type","text")("control","lastName"),i(3),g(r(13,24,s.onUpdateFreelancerSettingsIdentity)==="success"?12:-1),i(2),g(r(15,26,s.onUpdateFreelancerSettingsIdentity)==="true"?14:16))},dependencies:[P,R,F,L,T,M,v,$],encapsulation:2,changeDetection:0})};function Se(e,o){e&1&&(a(0,"small",5),p(1),n(2,"translate"),l(),c(3,"br")(4,"br")),e&2&&(i(),m(" ",r(2,1,"SETTINGS_PAGE.TABS.SECURITY.PASSWORD_UPDATED")," "))}function Ee(e,o){e&1&&(a(0,"button",4),c(1,"span",6),a(2,"span"),p(3),n(4,"translate"),l()()),e&2&&(d("disabled",!0),i(3),_(r(4,2,"GENERAL.MODIFYING")))}function ge(e,o){if(e&1&&(a(0,"button",4),p(1),n(2,"translate"),l()),e&2){let t=N();d("disabled",t.formGroup().invalid),i(),m(" ",r(2,2,"GENERAL.MODIFY")," ")}}var U=class e{freelancerService=u(h);formGroup=f(new w({password:new I("",[y.required]),passwordConfirmation:new I("",[y.required])}));formErrors=f({password:"",passwordConfirmation:""});onUpdatePassword=f("false");onSubmit(){let o={password:this.formGroup().get("password")?.value,passwordConfirmation:this.formGroup().get("passwordConfirmation")?.value};this.onUpdatePassword.set("true"),this.freelancerService.updateSecurity(o).subscribe({complete:()=>{this.onUpdatePassword.set("success"),this.formErrors.set({password:"",passwordConfirmation:""})},error:t=>{let{type:s}=t.error;this.onUpdatePassword.set("error"),s&&s==="INVALID_PARAMETERS"&&this.formErrors.set(t.error.error)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=S({type:e,selectors:[["app-settings-security"]],decls:11,vars:17,consts:[[3,"submit","formGroup"],[1,"mb-3"],[3,"id","label","type","control","error"],[1,"text-center"],[1,"btn","btn-primary",3,"disabled"],[1,"text-success"],[1,"fa-solid","fa-spinner","fa-spin"]],template:function(t,s){t&1&&(a(0,"form",0),D("submit",function(){return s.onSubmit()}),a(1,"div",1),c(2,"app-input",2),n(3,"translate"),l(),a(4,"div",1),c(5,"app-input",2),n(6,"translate"),l(),a(7,"div",3),E(8,Se,5,3),E(9,Ee,5,4,"button",4)(10,ge,3,4,"button",4),l()()),t&2&&(d("formGroup",s.formGroup()),i(2),d("id","this-password")("label",r(3,13,"GENERAL.PASSWORD"))("type","password")("control","password")("error",s.formErrors().password),i(3),d("id","this-password-confirmation")("label",r(6,15,"GENERAL.PASSWORD_CONFIRMATION"))("type","password")("control","passwordConfirmation")("error",s.formErrors().passwordConfirmation),i(3),g(s.onUpdatePassword()==="success"?8:-1),i(),g(s.onUpdatePassword()==="true"?9:10))},dependencies:[P,R,F,L,T,M,v],encapsulation:2,changeDetection:0})};function ve(e,o){if(e&1){let t=Q();b(0,"button",5),Z("click",function(){W(t);let C=N();return H(C.onDeleteClick())}),p(1),n(2,"translate"),A()}e&2&&(i(),m(" ",r(2,1,"GENERAL.DELETE")," "))}function Te(e,o){e&1&&(b(0,"button",3),K(1,"span",6),b(2,"span"),p(3),n(4,"translate"),A()()),e&2&&(X("disabled",!0),i(3),_(r(4,2,"GENERAL.DELETING")))}function be(e,o){e&1&&(b(0,"small",4),p(1),n(2,"translate"),A()),e&2&&(i(),m(" ",r(2,1,"SETTINGS_PAGE.TABS.DELETE_ACCOUNT.ACCOUNT_DELETED")," "))}var k=class e{store=u(G);freelancerService=u(h);fileService=u(pe);destroyRef=u(z);onDelete=f("false");deleteAccount(){this.freelancerService.deleteAccount().subscribe({complete:()=>{this.onDelete.set("success"),setTimeout(()=>this.store.dispatch(re()),3e3)}})}onDeleteClick(){let o=this.store.select(x);this.onDelete.set("true");let t=o.subscribe(s=>{if(s?.image){let C=s.image.split("findfreelancer.com/")[1];this.fileService.deleteFile({fileName:C}).subscribe({complete:()=>{this.deleteAccount()}})}else this.deleteAccount()});this.destroyRef.onDestroy(()=>t.unsubscribe())}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=S({type:e,selectors:[["app-settings-delete-account"]],decls:7,vars:4,consts:[[1,"text-danger","fw-bold"],[1,"text-center"],[1,"btn","btn-danger"],[1,"btn","btn-danger",3,"disabled"],[1,"text-success"],[1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-spinner","fa-spin"]],template:function(t,s){t&1&&(b(0,"p",0),p(1),n(2,"translate"),A(),b(3,"div",1),E(4,ve,3,3,"button",2)(5,Te,5,4,"button",3)(6,be,3,3,"small",4),A()),t&2&&(i(),m(" ",r(2,2,"SETTINGS_PAGE.TABS.DELETE_ACCOUNT.WARNING"),`
`),i(3),g(s.onDelete()==="false"?4:s.onDelete()==="true"?5:6))},dependencies:[T,v],encapsulation:2})};var rt=[{path:"",component:B,children:[{path:"identity",component:O,data:{title:"SETTINGS_PAGE.TITLE_IDENTITY"}},{path:"security",component:U,data:{title:"SETTINGS_PAGE.TITLE_SECURITY"}},{path:"delete-account",component:k,data:{title:"SETTINGS_PAGE.TITLE_DELETE_ACCOUNT"}},{path:"**",redirectTo:"identity"}]}];export{rt as settingsRoutes};
