<form [formGroup]="formGroup()" (submit)="onSubmit()">
  @for (
    languageGroup of languagesControls;
    track languageGroup;
    let i = $index
  ) {
    <div [formGroup]="languageGroup" class="mb-3">
      <div class="row">
        <div class="col-4 col-md-5">
          <select
            formControlName="code"
            id="this-language-{{ i }}"
            class="form-select"
          >
            <option value="">
              {{ "GENERAL.SELECT_LANGUAGE" | translate }}
            </option>

            @for (language of getLanguages(i); track language) {
              <option [value]="language.code">{{ language.name }}</option>
            }
          </select>
        </div>
        <div class="col-4 col-md-5">
          <select
            formControlName="level"
            id="this-level-{{ i }}"
            class="form-select"
          >
            <option value="">
              {{ "EDIT_PROFILE_PAGE.TABS.LANGUAGES.SELECT_LEVEL" | translate }}
            </option>
            <option value="basic">
              {{ "GENERAL.LANGUAGES.BASIC" | translate }}
            </option>
            <option value="conversational">
              {{ "GENERAL.LANGUAGES.CONVERSATIONAL" | translate }}
            </option>
            <option value="fluent">
              {{ "GENERAL.LANGUAGES.FLUENT" | translate }}
            </option>
            <option value="native-bilingual">
              {{ "GENERAL.LANGUAGES.NATIVE-BILINGUAL" | translate }}
            </option>
          </select>
        </div>
        <div class="col-4 col-md-2 text-end">
          <button
            (click)="onDeleteLanguageClick(i)"
            class="btn btn-danger"
            type="button"
          >
            {{ "GENERAL.DELETE" | translate }}
          </button>
        </div>
      </div>
    </div>
  }

  <button
    (click)="onAddLanguageClick()"
    class="btn btn-outline-primary"
    type="button"
  >
    {{ "EDIT_PROFILE_PAGE.TABS.LANGUAGES.ADD_LANGUAGE" | translate }}
  </button>

  <hr />

  <div class="text-center">
    @if (onUpdateLanguage() === "success") {
      <small class="text-success">
        {{ "EDIT_PROFILE_PAGE.TABS.LANGUAGES.LANGUAGES_UPDATED" | translate }}
      </small>

      <br /><br />
    }

    @if (onUpdateLanguage() !== "true") {
      <button
        [disabled]="formGroup().invalid"
        class="btn btn-primary"
        type="submit"
      >
        {{ "GENERAL.SAVE" | translate }}
      </button>
    } @else {
      <button [disabled]="true" class="btn btn-primary" type="submit">
        {{ "GENERAL.SAVING" | translate }}
      </button>
    }
  </div>
</form>
